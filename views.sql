CREATE  OR REPLACE ALGORITHM=UNDEFINED DEFINER=`root`@`localhost` SQL SECURITY DEFINER VIEW `fbsr2`.`event_registrations` AS select `b`.`Event_id` AS `event_id`,`b`.`RegisteredDate` AS `registereddate`,`b`.`UnregisteredDate` AS `unregistereddate`,`d`.`Name` AS `event_type`,`e`.`Name` AS `event_name`,concat(`au`.`first_name`,_latin1' ',`au`.`last_name`) AS `fullname`,`ag`.`name` AS `user_group`,`up`.`PhoneNumer` AS `PhoneNumer`,`up`.`ImageUrl` AS `imageurl` from ((((((`fbsr2`.`bokin_eventregistration` `b` join `fbsr2`.`bokin_event` `e`) join `fbsr2`.`bokin_division` `d`) join `fbsr2`.`bokin_userprofile` `up`) join `fbsr2`.`auth_user` `au`) join `fbsr2`.`auth_group` `ag`) join `fbsr2`.`auth_user_groups` `aug`) where ((`b`.`Event_id` = `e`.`id`) and (`e`.`Division_id` = `d`.`id`) and (`b`.`User_id` = `up`.`User_id`) and (`up`.`User_id` = `au`.`id`) and (`au`.`id` = `aug`.`user_id`) and (`aug`.`group_id` = `ag`.`id`))



CREATE  OR REPLACE ALGORITHM=UNDEFINED DEFINER=`root`@`localhost` SQL SECURITY DEFINER VIEW `fbsr2`.`events` AS select `e`.`id` AS `id`,`d`.`Name` AS `division`,`e`.`Name` AS `event`,count(1) AS `cnt`,`e`.`CloseDate` AS `CloseDate` from ((`fbsr2`.`bokin_eventregistration` `b` join `fbsr2`.`bokin_event` `e`) join `fbsr2`.`bokin_division` `d`) where (isnull(`b`.`UnregisteredDate`) and (`b`.`Event_id` = `e`.`id`) and (`e`.`Division_id` = `d`.`id`)) group by `b`.`Event_id`